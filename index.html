<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Goal Tracker</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Average&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="styles.css">

    <script src="https://accounts.google.com/gsi/client" async defer></script>

</head>
<body>

    <div id="sign-in-view" style="text-align: center; padding-top: 40px;">
        <h1 style="color: #005DB3; font-family: 'Average', serif;">Student Goal Tracker</h1>
        <p style="font-family: 'Lato', sans-serif;">Please sign in to continue.</p>
        <div id="g_id_onload"
             data-client_id="335634136444-v0os3kcffpbml2kcluah7uii756de2hu.apps.googleusercontent.com"
             data-callback="handleCredentialResponse"
             data-auto_prompt="false">
        </div>
        <div class="g_id_signin"
             data-type="standard"
             data-shape="rectangular"
             data-theme="outline"
             data-text="signin_with"
             data-size="large"
             data-logo_alignment="left">
        </div>
    </div>

    <main id="app-container" style="display: none;">
        <div id="onboarding-view" class="section" style="display: none; text-align: center; margin-top: 24px;">
            <h2>Welcome to the Student Goal Tracker!</h2>
            <p style="font-size: 1.1rem; max-width: 500px; margin: 0 auto 24px auto;">To get started, the app needs to create a new Google Sheet in your personal Google Drive to securely store your student data.</p>
            <button id="setup-spreadsheet-btn" class="save-btn">Create My Spreadsheet</button>
        </div>
        <div class="container">
          <h1>Student Goal Tracker</h1>
          
          <div class="section" id="student-section">
            <div class="section-header">
              <label for="studentSearch">Select Student:</label>
              <div class="sort-controls">
                <button id="sort-by-update-btn" class="icon-button active" title="Sort by Most Recent">
                  <span class="material-symbols-outlined">history</span>
                </button>
                <button id="sort-alpha-btn" class="icon-button" title="Sort Alphabetically">
                  <span class="material-symbols-outlined">sort_by_alpha</span>
                </button>
                <button id="toggle-inactive-btn" class="icon-button" title="Show Inactive Students">
                  <span class="material-symbols-outlined">visibility_off</span>
                </button>
              </div>
            </div>
            <div class="input-with-button">
              <input type="text" id="studentSearch" placeholder="Type to search for student...">
              <button id="edit-student-btn" class="icon-button" title="Edit Student" style="display: none;"><span class="material-symbols-outlined">edit</span></button> 
            </div>
            <div id="student-search-results"></div>
            <div id="selected-student-display" class="selected-student" style="display: none;"></div>
          </div>
    
          <div class="section" id="goals-section" style="display: none;">
            <div class="section-header">
              <h2>Goals for <span id="current-student-name"></span>:</h2>
            </div>
            <div id="student-goals-list" class="goal-button-container"></div>
            <div id="selected-goal-display" class="selected-goal-display" style="display: none;"></div>
          </div>
    
          <div class="section" id="observation-section" style="display: none;">
            <div class="section-header">
              <h2>Record Observation:</h2>
            </div>
            <textarea id="observationNote" rows="4" placeholder="Enter observation note..."></textarea>
            <div id="tag-selection-container">
              <label>Behavioral Tags:</label>
              <div id="tag-chips-area" class="tag-chips-area"></div>
            </div>
            <button id="submitObservationBtn">Submit Observation</button>
          </div>
    
          <div class="report-section" id="report-section" style="display: none;">
            <div class="section-header">
              <h2>Student Report:</h2>
              <div class="report-actions">
                <div class="toggle-switch-container" title="Show/Hide entries excluded from PDF reports">
                  <label for="show-hidden-toggle">Show Hidden</label>
                  <label class="toggle-switch">
                    <input type="checkbox" id="show-hidden-toggle">
                    <span class="slider"></span>
                  </label>
                </div>
                <button id="downloadPdfIcon" class="icon-button" title="Download as PDF" style="display: none;"><span class="material-symbols-outlined">download</span></button>
                <button id="copyReportIcon" class="icon-button" title="Copy Report" style="display: none;"><span class="material-symbols-outlined">content_copy</span></button>
              </div>
            </div>
            <div id="student-report-content"></div>
            <div id="report-tag-summary" style="display: none;">
              <h3>Tag Summary</h3>
              <div id="report-tag-summary-content" class="tag-chips-area"></div>
              <button id="reset-filter-btn" class="text-button" style="display: none;">Reset Filter</button>
            </div>
          </div>
    
          <div id="app-status"></div>
        </div>
    
        <div id="successModal" class="modal-overlay">
          </div>
        <div id="goalModal" class="modal-overlay">
          </div>
        <div id="studentModal" class="modal-overlay">
          </div>
        <div id="tagModal" class="modal-overlay">
          </div>
    </main>
    
    <script src="script.js" defer></script>

</body>
</html>
